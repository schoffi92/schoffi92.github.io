var Game=function(){function t(t){this.lastTime=0,this.currentViewIndex=0,this.viewNames=[],this.views=[],t=t||document.body,this._app=new PIXI.Application({width:800,height:600}),this._keyboard=new Keyboard,t.appendChild(this._app.view)}return Object.defineProperty(t.prototype,"stage",{get:function(){return this._app.stage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ticker",{get:function(){return this._app.ticker},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this._app.screen.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this._app.screen.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keyboard",{get:function(){return this._keyboard},enumerable:!0,configurable:!0}),t.prototype.addView=function(t,e){if(0<=this.viewNames.indexOf(t))return!1;this.viewNames.push(t),this.views.push(e)},t.prototype.switchView=function(t){var e=this.viewNames.indexOf(t);return 0<=e&&(this.views[this.currentViewIndex].deactivate(),this.views[e].activate(),this.currentViewIndex=e,!0)},t}();document.addEventListener("DOMContentLoaded",function(){var s=new Resources;s.load(function(){var t=new Game(document.getElementById("canvasContainer"));new SplashView(t,s),new MenuView(t,s),new GameView(t,s);if(!t.switchView("splash")){var e=document.getElementsByName("canvas");if(0<e.length)for(var i=0;i<e.length;i++)e[i].remove();document.getElementById("error").classList.remove("hidden")}})});var __extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),EnemyShip=function(s){function t(t,e){var i=s.call(this)||this;return i.speed=1,i.game=t,i.res=e,i.shipSprite=new PIXI.Sprite,i.shipSprite.texture=e.resources.enemy.texture,i.addChild(i.shipSprite),i.movement=new PIXI.Point,i.position.set(i.game.width,(i.game.height-i.shipSprite.height)*Math.random()),i.randMovement(),i}return __extends(t,s),t.prototype.randMovement=function(){this.movement.x=-1,this.movement.y=2*Math.random()-1,this.movement.y<.1&&-.1<this.movement.y&&(this.movement.y=-.1)},t.prototype.update=function(t){this.position.set(this.x+this.movement.x*t*this.speed,this.y+this.movement.y*t*this.speed*1.2),this.position.y<=0||this.position.y+this.shipSprite.height>=this.game.height?this.movement.y=-this.movement.y:Math.random()<.005&&this.randMovement()},t.prototype.activate=function(){this.game.stage.addChild(this),this.game.ticker.add(this.update,this)},t.prototype.deactivate=function(){this.game.stage.removeChild(this),this.game.ticker.remove(this.update,this)},t.prototype.collisionBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.die=function(){Explosion.createExplosionEffect(this.game,this.res,this.x-this.width/2,this.y+this.height/2,this)},t}(PIXI.Container),Explosion=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(o){function r(t,e,i){var s=o.call(this)||this;return s.sprites=[],s.spentTime=0,s.game=t,s.res=e,s.setup=i,s.game.stage.addChild(s),s}return __extends(r,o),r.createExplosionEffect=function(t,e,i,s,o){var n=new r(t,e,{maxParticleLifeTime:12,minParticleLifeTime:10,speed:2,particlePerSecond:0,maxScale:.5});n.position.set(i,s),t.stage.addChild(n),t.ticker.add(n.update,n),n.emitParticles(10),setTimeout(function(){o.removeChild(n),t.ticker.remove(n.update,n)},1e4)},r.prototype.createExplosionParticle=function(){var t=new PIXI.Sprite(this.res.resources.explosion.texture),e={lifetime:0,maxLifetime:Math.random()*(this.setup.maxParticleLifeTime-this.setup.minParticleLifeTime)+this.setup.minParticleLifeTime,directionX:2*Math.random()-1,directionY:2*Math.random()-1,sprite:t,scale:this.setup.maxScale};t.anchor.set(.5,.5),t.position.set(t.x+e.directionX,t.y+e.directionY),t.scale.set(this.setup.maxScale,this.setup.maxScale),this.sprites.push(e),this.addChild(t)},r.prototype.activate=function(){this.game.ticker.add(this.update,this)},r.prototype.deactivate=function(){this.game.stage.removeChild(this),this.game.ticker.remove(this.update,this)},r.prototype.emitParticles=function(t){for(var e=0;e<t;e++)this.createExplosionParticle()},r.prototype.update=function(t){for(var e=this.sprites.length-1;0<=e;e--)this.sprites[e].sprite.x+=this.sprites[e].directionX*this.setup.speed*t,this.sprites[e].sprite.y+=this.sprites[e].directionY*this.setup.speed*t,this.sprites[e].lifetime+=t,this.sprites[e].scale=(1-this.sprites[e].lifetime/this.sprites[e].maxLifetime)*this.setup.maxScale,this.sprites[e].sprite.scale.set(this.sprites[e].scale,this.sprites[e].scale),this.sprites[e].lifetime>this.sprites[e].maxLifetime&&(this.removeChild(this.sprites[e].sprite),this.sprites.splice(e,1));0<this.setup.particlePerSecond&&this.emitParticles(this.setup.particlePerSecond)},r}(PIXI.Container)),PlayerShip=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(s){function t(t,e){var i=s.call(this)||this;return i.speed=2,i.rockets=[],i.shootDelay=0,i.game=t,i.res=e,i.shipSprite=new PIXI.Sprite,i.shipSprite.texture=e.resources.player.texture,i.shipSprite.rotation=Math.PI/180*90,i.addChild(i.shipSprite),i}return __extends(t,s),t.prototype.shoot=function(){var t=new Rocket(this.game,this.res);t.position.set(this.x-this.width/2,this.y+this.height/2),t.activate(),this.rockets.push(t)},t.prototype.update=function(t){this.game.keyboard.getKey("ArrowUp")&&(0<this.y?this.y-=this.speed*t:this.y=0),this.game.keyboard.getKey("ArrowDown")&&(this.y<this.game.height-this.shipSprite.height?this.y+=this.speed*t:this.y=this.game.height-this.shipSprite.height),this.game.keyboard.getKey("ArrowLeft")&&(this.x>this.shipSprite.width?this.x-=this.speed*t:this.x=this.shipSprite.width),this.game.keyboard.getKey("ArrowRight")&&(this.x<this.game.width?this.x+=this.speed*t:this.x=this.game.width),this.game.keyboard.getKey("Space")&&(this.shootDelay-=t,this.shootDelay<=0&&(this.shoot(),this.shootDelay+=25))},t.prototype.activate=function(){this.game.stage.addChild(this),this.game.ticker.add(this.update,this),this.position.set(this.shipSprite.width,this.game.height/2)},t.prototype.deactivate=function(){this.game.stage.removeChild(this),this.game.ticker.remove(this.update,this)},t.prototype.die=function(){this.deactivate(),Explosion.createExplosionEffect(this.game,this.res,this.x-this.width/2,this.y+this.height/2,this)},t.prototype.collisionBox=function(){return{x:this.x-this.width,y:this.y,width:this.width,height:this.height}},t}(PIXI.Container)),Rocket=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(s){function t(t,e){var i=s.call(this)||this;return i.speed=10,i.game=t,i.rocketSprite=new PIXI.Sprite,i.rocketSprite.anchor.set(.5,.5),i.rocketSprite.texture=e.resources.rocket.texture,i.addChild(i.rocketSprite),i}return __extends(t,s),t.prototype.update=function(t){this.x+=this.speed*t},t.prototype.activate=function(){this.game.stage.addChild(this),this.game.ticker.add(this.update,this)},t.prototype.deactivate=function(){this.game.stage.removeChild(this),this.game.ticker.remove(this.update,this)},t.prototype.collisionBox=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t}(PIXI.Container)),SlideTexture=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(n){function t(t,e,i){var s=n.call(this)||this;s.sprites=[],s.speed=1,s.speed=i||s.speed,s.game=t,s.tex=e;for(var o=0;o<s.game.width;o+=s.tex.width)s.addTexture();return s}return __extends(t,n),t.prototype.addTexture=function(){var t=0<this.sprites.length?this.sprites[this.sprites.length-1].x+this.sprites[this.sprites.length-1].width:0,e=new PIXI.Sprite(this.tex);e.x=t,this.addChild(e),this.sprites.push(e)},t.prototype.activate=function(){this.game.stage.addChild(this),this.game.ticker.add(this.update,this)},t.prototype.deactivate=function(){this.game.stage.removeChild(this),this.game.ticker.remove(this.update,this)},t.prototype.update=function(t){if(0<this.sprites.length){var e=this.sprites.length-1;this.sprites[e].x+this.sprites[e].width+this.speed*t<this.game.width&&this.addTexture();for(var i=this.sprites.length-1;0<=i;i--)this.sprites[i].x+=this.speed*t,this.sprites[i].x+this.sprites[i].width<0&&(this.removeChild(this.sprites[i]),this.sprites.splice(i,1))}},t}(PIXI.Container)),Button=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(i){function t(t){var e=i.call(this)||this;return e._cb=function(){},e._clickStarted=!1,e._tilingSprite=new PIXI.extras.TilingSprite(t.texture,t.width,t.height),e._tilingSprite.anchor.set(.5,.5),e.setup=t,e.displayDefault(),e.anchor.x=.5,e.anchor.y=.5,e.interactive=!0,e.addChild(e._tilingSprite),e.on("mousedown",function(){e.onDown()}),e.on("mouseup",function(){e.onUp()}),e.on("mouseover",function(){e.onHover()}),e.on("mouseout",function(){e.onOut()}),e}return __extends(t,i),Object.defineProperty(t.prototype,"name",{get:function(){return this.setup.name||""},enumerable:!0,configurable:!0}),t.prototype.displayDefault=function(){this._tilingSprite.tilePosition.set(-this.setup.buttonPosX,-this.setup.buttonPosY)},t.prototype.displayHover=function(){this._tilingSprite.tilePosition.set(-this.setup.buttonPosX,-(this.setup.buttonPosY+this.setup.height))},t.prototype.displayPressed=function(){this._tilingSprite.tilePosition.set(-this.setup.buttonPosX,-(this.setup.buttonPosY+2*this.setup.height))},t.prototype.clicked=function(){this._cb()},t.prototype.onClicked=function(t){this._cb=t},t.prototype.onUp=function(){this._clickStarted&&(this.displayDefault(),this.clicked(),this._clickStarted=!1)},t.prototype.onDown=function(){this.displayPressed(),this._clickStarted=!0},t.prototype.onOut=function(){this.displayDefault(),this._clickStarted=!1},t.prototype.onHover=function(){this.displayHover()},t}(PIXI.Sprite)),Collider=function(){function t(){}return t.collisionBox=function(t,e,i,s){return{x:t,y:e,width:i,height:s}},t.hitTest=function(t,e){var i=!1,s=function(t,e,i,s){return t<=i&&i<=t+e||i<=t&&t<=i+s};return s(t.x,t.width,e.x,e.width)&&s(t.y,t.height,e.y,e.height)&&(i=!0),i},t}(),Keyboard=function(){function t(){var e=this;this.pressedKeys=[],document.addEventListener("keydown",function(t){e.downHandler(t)}),document.addEventListener("keyup",function(t){e.upHandler(t)})}return t.prototype.downHandler=function(t){this.pressedKeys.indexOf(t.code)<0&&this.pressedKeys.push(t.code)},t.prototype.upHandler=function(t){var e=this.pressedKeys.indexOf(t.code);0<=e&&this.pressedKeys.splice(e,1)},t.prototype.getKey=function(t){return!(this.pressedKeys.indexOf(t)<0)},Object.defineProperty(t.prototype,"pressed",{get:function(){return this.pressedKeys},enumerable:!0,configurable:!0}),t}(),Resources=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(e){function t(){var t=e.call(this)||this;return t._isCompleted=!1,t._completed=function(){},t._res={},t.add("player","resources/player.png").add("buttons","resources/buttons.jpg").add("menubg","resources/menubg.jpg").add("rocket","resources/rocket.png").add("enemy","resources/enemy.png").add("logo","resources/logo.png").add("gamebg_far","resources/sky.gif").add("gamebg_near","resources/landscape.jpg").add("explosion","resources/explosion2.png").add("splash","resources/splash.jpg"),t}return __extends(t,e),t}(PIXI.loaders.Loader)),GameView=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(s){function t(t,e){var i=s.call(this)||this;return i.playerDead=!1,i.viewName="game",i.spentTime=0,i.enemies=[],i.game=t,i.game.addView(i.viewName,i),i.res=e,i.farBg=new SlideTexture(i.game,e.resources.gamebg_far.texture,-1),i.nearBg=new SlideTexture(i.game,e.resources.gamebg_near.texture,-10),i.nearBg.y=i.game.height-e.resources.gamebg_near.texture.height,i}return __extends(t,s),t.prototype.activate=function(){this.farBg.activate(),this.nearBg.activate(),this.game.stage.addChild(this),this.game.ticker.add(this.update,this),this.player=new PlayerShip(this.game,this.res),this.player.activate(),this.playerDead=!1},t.prototype.deactivate=function(){for(var t in this.farBg.deactivate(),this.nearBg.deactivate(),this.game.stage.removeChildren(),this.game.ticker.remove(this.update,this),this.player.deactivate(),this.enemies)this.enemies[t].deactivate();this.enemies=[],this.player=void 0},t.prototype.addEnemy=function(){var t=new EnemyShip(this.game,this.res);t.activate(),this.enemies.push(t)},t.prototype.displayGameOver=function(){var t=this;this.player.die(),this.playerDead=!0;var e=new PIXI.Text("Game Over");e.anchor.set(.5,.5),e.position.x=this.game.width/2,e.position.y=this.game.height/2,e.style=new PIXI.TextStyle({fontFamily:"Dignity",fontSize:50,fill:"#888888"}),this.addChild(e),setTimeout(function(){t.removeChild(e),t.game.switchView("menu")},4e3)},t.prototype.detectCollision=function(){for(var t=this.enemies.length-1;0<=t;t--){if(Collider.hitTest(this.enemies[t].collisionBox(),this.player.collisionBox()))return void this.displayGameOver();if(this.enemies[t].x<-this.enemies[t].width)this.enemies[t].deactivate(),this.enemies.splice(t,1);else for(var e=this.player.rockets.length-1;0<=e;e--)if(Collider.hitTest(this.enemies[t].collisionBox(),this.player.rockets[e].collisionBox())){this.enemies[t].die(),this.enemies[t].deactivate(),this.enemies.splice(t,1),this.player.rockets[e].deactivate(),this.player.rockets.splice(e,1);break}}},t.prototype.update=function(t){this.playerDead||this.detectCollision(),120<this.spentTime&&(this.addEnemy(),this.spentTime-=120),this.spentTime+=t},t}(PIXI.Container)),MenuView=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(s){function t(t,e){var i=s.call(this)||this;return i.viewName="menu",i.btns=[],i.spentTime=0,i.game=t,i.game.addView(i.viewName,i),i.res=e,i.background=new PIXI.Sprite,i.background.texture=e.resources.menubg.texture,i.addChild(i.background),i.createLogo(),i.createButtons(),i}return __extends(t,s),t.prototype.activate=function(){for(var t in this.game.stage.addChild(this),this.btns)this.btns[t].displayDefault()},t.prototype.deactivate=function(){this.game.stage.removeChildren()},t.prototype.createLogo=function(){this.logo=new PIXI.Sprite,this.logo.texture=this.res.resources.logo.texture,this.logo.anchor.set(.5,.5),this.logo.x=this.game.width/2,this.logo.y=150,this.addChild(this.logo)},t.prototype.addButton=function(t,e){var i=this,s={texture:this.res.resources.buttons.texture,width:150,height:50,buttonPosX:150*this.btns.length,buttonPosY:0,name:t},o=new Button(s);e||(e=function(){i.gameBtnClicked()}),o.anchor.set(.5,.5),o.position.set(this.game.width/2,70*this.btns.length+300),o.onClicked(e),this.btns.push(o),this.addChild(o)},t.prototype.createButtons=function(){var t=this;this.addButton("GAME1"),this.addButton("GAME2"),this.addButton("GAME3"),this.addButton("EXIT",function(){t.exitBtnClicked()})},t.prototype.gameBtnClicked=function(){this.game.switchView("game")},t.prototype.exitBtnClicked=function(){location.href="/goodbye.html"},t}(PIXI.Container)),SplashView=(__extends=this&&this.__extends||function(){var s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}s(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}(),function(s){function t(t,e){var i=s.call(this)||this;return i.viewName="splash",i.spentTime=0,i.game=t,i.game.addView(i.viewName,i),i.splashSprite=new PIXI.Sprite,i.splashSprite.texture=e.resources.splash.texture,i.addChild(i.splashSprite),i}return __extends(t,s),t.prototype.activate=function(){this.game.stage.addChild(this),this.game.ticker.add(this.update,this)},t.prototype.deactivate=function(){this.game.stage.removeChildren(),this.game.ticker.remove(this.update,this)},t.prototype.update=function(t){this.spentTime+=t,120<this.spentTime&&0<this.splashSprite.alpha&&(this.splashSprite.alpha-=t/30),this.splashSprite.alpha<=0&&this.game.switchView("menu")},t}(PIXI.Container));